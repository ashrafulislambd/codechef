{"category_name":"hard","status":"success","problem_code":"KNGHTMOV","problem_name":"Knight Moving","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><p>\nConsider an infinitely large chess table.\nFrom the cell (0, 0), our knight has to move to the cell (<b>X<\/b>, <b>Y<\/b>) by the rule:\nour knight could only move from a cell (<b>u<\/b>, <b>v<\/b>) to the cell (<b>u<\/b>+<b>A<sub>X<\/sub><\/b>, <b>v<\/b>+<b>A<sub>Y<\/sub><\/b>) or (<b>u<\/b>+<b>B<sub>X<\/sub><\/b>, <b>v<\/b>+<b>B<sub>Y<\/sub><\/b>) in one move.\nNote that it may be different from ordinary knight's move of chess.\n<\/p>\n\n<p>In addition, there is <b>K<\/b> blocked cell(s) on the table where the knight could not move on.<\/p>\n\n<p>\nYour task is to count how many distinct ways the knight could complete his mission.\nTwo ways are called \"distinct\" if and only if they have different numbers of steps or there exists <b>i<\/b> such that they are in different cells after <b>i<\/b>-th step.\nNote that our knight may continue to move after he reaches the cell (<b>X<\/b>, <b>Y<\/b>).\n<\/p>\n\n<h3>Input<\/h3>\n<p>The first line contains an integer <b>T<\/b>, denoting the number of test cases. Each test case is described as follows:<\/p>\n<ul>\n<li>The first line contains 3 integer <b>X<\/b>, <b>Y<\/b>, <b>K<\/b>.<\/li>\n<li>The second line contains 4 integers <b>A<sub>X<\/sub><\/b>, <b>A<sub>Y<\/sub><\/b>, <b>B<sub>X<\/sub><\/b>, <b>B<sub>Y<\/sub><\/b>.<\/li>\n<li>The third line contains <b>K<\/b> pair(s) of integers, each represents co-ordinate of a blocked cell. This line does not exist if <b>K<\/b> = 0.<\/li>\n<\/ul>\n\n<h3>Output<\/h3>\n<p>\nFor each test case, output on a line the number of ways found modulo 1000000007 (10<sup>9<\/sup>+7).\nIf there are infinitely many ways, then output -1 instead.\n<\/p>\n\n<h3>Constraints<\/h3>\n<p>\n1 \u2264 <b>T<\/b> \u2264 5<br \/>\n0 \u2264 <b>K<\/b> \u2264 15<br \/>\nThe absolute values of all other input values are at most 500.<br \/>\n(0, 0) is not a blocked cell.<br \/>\n(<b>X<\/b>, <b>Y<\/b>) is not a blocked cell.<br \/>\n<\/p>\n\n<h3>Example<\/h3>\n\n<pre>\n<b>Input:<\/b>\n3\n3 3 0\n1 2 2 1\n9 9 2\n1 2 2 1\n1 2 6 6\n1 1 0\n0 0 0 0\n\n<b>Output:<\/b>\n2\n4\n0\n\n\n<\/pre>\n\n<p>\n<b>Explanations:<\/b>\n<\/p>\n<p>\nIn the first and second examples, our knight's move is the similar to ordinary knight's, but only 2 directions are allowed. In the first example, there are 2 ways (0, 0) -&gt; (1, 2) -&gt; (3, 3) and (0, 0) -&gt; (2, 1) -&gt; (3, 3).\n<\/p>\n<p>\nIn the third example, our knight's cannot move toward, so our knight's cannot complete his mission.\n<\/p>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYTH, PYTH 3.4, RUBY, SCALA, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"9","source_sizelimit":"50000","problem_author":"anhdq","problem_author_html_handle":"AnhDQ","problem_tester":"laycurse","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>laycurse<\/span>","date_added":"20-07-2012","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/anhdq'>\n                    anhdq\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/dynamic-programming'>\n                    dynamic-programming\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/gauss-elim'>\n                    gauss-elim\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/number-theory'>\n                    number-theory\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/sep12'>\n                    sep12\n                <\/a>","editorial_url":"http:\/\/discuss.codechef.com\/problems\/KNGHTMOV","user":{"username":null},"time":{"view_start_date":1347355996,"submit_start_date":1347355996,"visible_start_date":1347355800,"end_date":1735669800,"current":1493556738},"todo":false,"problem_status":"unattempted"}