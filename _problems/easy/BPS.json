
{"category_name":"easy","status":"success","problem_code":"BPS","problem_name":"Beats and Pieces","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span>###Read problems statements [Mandarin](http:\/\/www.codechef.com\/download\/translated\/LTIME66\/mandarin\/BPS.pdf) , [Bengali](http:\/\/www.codechef.com\/download\/translated\/LTIME66\/bengali\/BPS.pdf) , [Hindi](http:\/\/www.codechef.com\/download\/translated\/LTIME66\/hindi\/BPS.pdf) , [Russian](http:\/\/www.codechef.com\/download\/translated\/LTIME66\/russian\/BPS.pdf) and [Vietnamese](http:\/\/www.codechef.com\/download\/translated\/LTIME66\/vietnamese\/BPS.pdf) as well.\n\nChef has an array of $N$ integers $[A_1, A_2, \\dots, A_N]$. He wants to perform $M$ operations; for each $i$ ($1 \\le i \\le M$), the $i$-th operation consists of reversing the subarray $[A_{l_i}, \\dots, A_{r_i}]$.\n\nEach operation should be applied exactly once. However, Chef does not remember the order in which they should be applied, so he wants to choose a uniformly random permutation of the $M$ operations and apply them in that order.\n\nLet's denote by $B$ the resulting array if the operations are unpermuted, i.e. applied in the order $1$ through $M$. Find the probability that the resulting array (after Chef applies all operations in a random order) is equal to $B$. Specifically, this probability can be expressed as a fraction $P\/Q$, where $P$ and $Q$ are coprime positive integers; compute $P$ and $Q$.\n\n### Input\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\n- The first line of each test case contains two space-separated integers $N$ and $M$.\n- The second line contains $N$ space-separated integers $A_1, A_2, \\dots, A_N$.\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $l_i$ and $r_i$.\n\n### Output\nPrint a single line containing two integers $P$ and $Q$, separated by a slash (the character '\/').\n\n### Constraints \n- $1 \\le T \\le 10$\n- $1 \\le N \\le 10$\n- $1 \\le M \\le 9$\n- $1 \\le A_i \\le 10^9$ for each valid $i$\n- $1 \\le l_i \\le r_i \\le N$ for each valid $i$\n\n### Subtasks\n**Subtask #1 (100 points):** original constraints\n\n### Example Input\n```\n1\n3 3\n1 2 1\n1 3\n1 1\n3 3\n```\n\n### Example Output\n```\n1\/1\n```\t\n\n### Explanation\n**Example case 1:** Each order of the operations results in the same array $B = [1, 2, 1]$. \n","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.6, PYPY, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, rust, SCALA, swift, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, kotlin, PERL6, TEXT, SCM chicken, PYP3, CLOJ, COB, FS","max_timelimit":"1","source_sizelimit":"50000","problem_author":"nots0fast","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>nots0fast<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"24-11-2018","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/easy'>easy<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ltime66'>ltime66<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/nots0fast'>nots0fast<\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/BPS","time":{"view_start_date":1543078801,"submit_start_date":1543078801,"visible_start_date":1543078801,"end_date":1735669800,"current":1559472936},"user":{"username":"","access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}