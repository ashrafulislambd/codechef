{"category_name":"easy","status":"success","problem_code":"PROTEPOI","problem_name":"Protecting The Poison","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3>Read problems statements in <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/SNCKPA17\/mandarin\/PROTEPOI.pdf\">Mandarin Chinese<\/a>, <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/SNCKPA17\/russian\/PROTEPOI.pdf\">Russian<\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/SNCKPA17\/vietnamese\/PROTEPOI.pdf\">Vietnamese<\/a> as well.<\/h3>\n\n<p>\nThe kingdom of the snakes is an <b>N<\/b>x<b>N<\/b> grid. Their most-valued possession is a huge collection of poison, which is stored in the central <b>K<\/b>x<b>K<\/b> grid. It is guaranteed that both <b>N<\/b> and <b>K<\/b> are odd. What we mean by 'central' is this: suppose in the <b>N<\/b>x<b>N<\/b> grid, (i, j) refers to the cell in the i-th row and j-th column and (1,1) refers to the top-left corner and (N,N) refers to the bottom-right corner. Then the poison is stored in the <b>K<\/b>x<b>K<\/b> square whose top-left corner is <b>( (N - K)\/2 + 1, (N - K)\/2 + 1 )<\/b>.\n<\/p>\n\n<p>\nBut there are thieves who want to steal the poison. They cannot enter the <b>N<\/b>x<b>N<\/b> grid, but they can shoot arrows from outside. These arrows travel across a row (from left to right, or right to left), or across a column (top to bottom or bottom to top) in a straight line. If the arrow enters the <b>K<\/b>x<b>K<\/b> grid, some of the poison will stick to the arrow, and if it exits the <b>N<\/b>x<b>N<\/b> grid after that, the thieves will have successfully stolen some of the poison.<\/p>\n\n<p>As the King of the snakes, you want to thwart these attempts. You know that the arrows will break and stop if they hit a snake's scaly skin, but won't hurt the snakes. There are some snakes already guarding the poison. Each snake occupies some consecutive cells in a straight line inside the <b>N<\/b>x<b>N<\/b> grid. That is, they are either part of a row, or part of a column. Note that there can be intersections between the snakes.  A configuration of snakes is 'safe', if the thieves cannot steal poison. That is, no matter which row or column they shoot arrows from, either the arrow should hit a snake and stop (this can happen even after it has entered and exited the <b>K<\/b>x<b>K<\/b> grid), or it shouldn't ever enter the <b>K<\/b>x<b>K<\/b> grid.<\/p>\n\n<p>The King has other duties for the snakes, and hence wants to remove as many snakes as possible from this configuration, such that the remaining configuration is still 'safe'. Help him find the minimum number of snakes he needs to leave behind to protect the poison.<\/p>\n\n\n<h3>Input<\/h3>\n<ul>\n<li>The first line contains a single integer, <b>T<\/b>, the number of testcases.<\/li>\n<li>The first line of each testcase contains three integers: <b>N, K<\/b> and <b>M<\/b>, where <b>N<\/b> is the size of the entire square grid, <b>K<\/b> is the size of the square containing the poison, and <b>M<\/b> is the number of initial snakes.<\/li>\n<li><b>M<\/b> lines follow, the i-th of which contains four integers: <b>HX<sub>i<\/sub>, HY<sub>i<\/sub>, TX<sub>i<\/sub>, TY<sub>i<\/sub><\/b>. (<b>HX<sub>i<\/sub>, HY<sub>i<\/sub><\/b>) is the cell which contains the head of the i-th snake. (<b>TX<sub>i<\/sub>, TY<sub>i<\/sub><\/b>) is the cell which contains the tail of the i-th snake. It is guaranteed that both these cells will either lie in the same row, or same column. And hence the cells in between them, including these two cells, represents the i-th snake.<\/li>\n<\/ul>\n\n<h3>Output<\/h3>\n<ul>\n<li>For each testcase, output a single integer in a new line: The minimum number of the snakes that the king can keep and still protect the poison. If it is not possible to protect the poison even with all the snakes, output -1.<\/li>\n<\/ul>\n\n<h3>Constraints<\/h3>\n<ul>\n<li>1 \u2264 <b>T<\/b> \u2264 4<\/li>\n<li>3 \u2264 <b>N<\/b> \u2264 10<sup>9<\/sup><\/li>\n<li>1 \u2264 <b>K<\/b> \u2264 <b>N<\/b>-2<\/li>\n<li>Both <b>N<\/b> and <b>K<\/b> will be odd integers<\/li>\n<li>1 \u2264 <b>M<\/b> \u2264 10<sup>5<\/sup><\/li>\n<li>1 \u2264 <b>HX<sub>i<\/sub>, HY<sub>i<\/sub>, TX<sub>i<\/sub>, TY<sub>i<\/sub><\/b> \u2264 <b>N<\/b><\/li>\n<li>It is guaranteed that at least one of (<b>HX<sub>i<\/sub> = TX<sub>i<\/sub><\/b>), and (<b>HY<sub>i<\/sub> = TY<sub>i<\/sub><\/b>) will be true for all i<\/li>\n<li>None of the cells in the <b>K<\/b>x<b>K<\/b> grid will be occupied by any snake<\/li>\n<\/ul>\n\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n2\n7 3 7\n1 1 6 1\n1 2 3 2\n5 2 5 2\n2 4 2 6\n6 2 6 4\n5 6 5 7\n7 1 7 4\n7 3 7\n1 1 6 1\n1 2 3 2\n5 2 5 2\n2 6 2 6\n6 2 6 4\n5 6 5 7\n7 1 7 4\n\n<b>Output:<\/b>\n3\n-1\n<\/pre>\n\n<h3>Explanation<\/h3>\n<p>The first example corresponds to:<\/p>\n<p><\/p>\n<img src=\"https:\/\/puu.sh\/vUwp7\/33aaeb020d.png\" height=\"250\"\/>\n<p><\/p>\n<p>Note that the top-left corner cell of the <b>N<\/b>x<b>N<\/b> grid is by definition, (1,1). The inner square contains the poison, and the seven snakes are shown in different colours. The green snake is the 1st snake in the input.<\/p>\n<p>We can remove all but 3 snakes and protect the poison. One such configuration is this:<\/p>\n<p><\/p>\n<img src=\"https:\/\/puu.sh\/vUwkv\/da691c5f2f.png\" height=\"250\"\/>\n<p><\/p>\n<p>You can check that no arrow can enter the inner poison square and exit the outer square without hitting a snake. Hence is it safe. Also, you cannot do this with fewer snakes. Hence 3 is the answer.<\/p>\n\n<p>The second testcase corresponds to:<\/p>\n<p><\/p>\n<img src=\"https:\/\/puu.sh\/vUwHJ\/092f78c0b3.png\" height=\"250\"\/>\n<p><\/p>\n<p>You can check that even with all the snakes, this is not a safe configuration, because the thieves can shoot an arrow down the 5th column, and they can steal poison. Hence, the answer is -1.<\/p>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYPY, PYTH, PYTH 3.4, RUBY, SCALA, SCM chicken, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"3","source_sizelimit":"50000","problem_author":"admin3","problem_author_html_handle":"admin3","problem_tester":"kingofnumbers","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>kingofnumbers<\/span>","date_added":"18-05-2017","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/admin3'>\n                    admin3\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>\n                    easy-medium\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/geometry'>\n                    geometry\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/greedy'>\n                    greedy\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/snackdown'>\n                    snackdown\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/snckpa17'>\n                    snckpa17\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/sorting'>\n                    sorting\n                <\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/PROTEPOI","user":{"username":null},"time":{"view_start_date":1495992600,"submit_start_date":1495992600,"visible_start_date":1495992600,"end_date":1735669800,"current":1497284129},"todo":false,"problem_status":"unattempted"}