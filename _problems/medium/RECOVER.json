
{"category_name":"medium","status":"success","problem_code":"RECOVER","problem_name":"Recover Square","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span>###Read problems statements in [Hindi](http:\/\/www.codechef.com\/download\/translated\/S19ELTST\/hindi\/RECOVER.pdf), [Mandarin Chinese](http:\/\/www.codechef.com\/download\/translated\/S19ELTST\/mandarin\/RECOVER.pdf), [Russian](http:\/\/www.codechef.com\/download\/translated\/S19ELTST\/russian\/RECOVER.pdf), [Vietnamese](http:\/\/www.codechef.com\/download\/translated\/S19ELTST\/vietnamese\/RECOVER.pdf) and [Bengali](http:\/\/www.codechef.com\/download\/translated\/S19ELTST\/bengali\/RECOVER.pdf) as well.\n\nA long time ago, a grid with $N$ rows and $N$ columns had mysteriously vanished. The cells of this grid contain integers $1$ through $N\\cdot N$ in some order. You do not know this order, but some information remains to this day: $M$ pairs of cells with Manhattan distance $1$ or $2$.\n\nYou should find a grid satisfying the following conditions (or decide that it does not exist):\n- The cells of the grid contain all integers from $1$ to $N^2$.\n- For each given pair $(u, v)$, the cells containing $u$ and $v$ have Manhattan distance $1$ or $2$.\n- There are no other pairs of cells with Manhattan distance $1$ or $2$.\n\nIf there are multiple possible solutions, you may find any one.\n\n### Input\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\n- The first line of each test case contains two space-separated integers $N$ and $M$.\n- Each of the following $M$ lines contains two space-separated integers $u$ and $v$ describing a pair of cells at distance $1$ or $2$.\n\n### Output\nFor each test case:\n- If there is no solution, print a single line containing the integer $-1$.\n- Otherwise, print $N$ lines containing $N$ space-separated integers each. The $j$-th integer on the $i$-th line should denote the number in the $i$-th row and $j$-th column of the grid.\n\n### Constraints \n- $1 \\le T \\le 200$\n- $1 \\le N \\le 200$\n- $0 \\le M \\le 3 \\cdot 10^5$\n- $1 \\le u, v \\le N^2$\n- $u \\neq v$\n- all pairs $(u, v)$ are distinct\n- the sum of $M$ over all test cases does not exceed $10^6$\n\n### Example Input\n```\n2\n2 6\n1 3\n1 4\n1 2\n3 4\n3 2\n4 2\n3 6\n3 8\n3 1\n3 9\n3 5\n3 2\n8 1\n```\n\n### Example Output\n```\n1 3\n2 4\n-1\n```\n\n### Explanation\n**Example case 1:** Note that there are many possible solutions.\n\n**Example case 2:** A solution satisfying all constraints on given pairs may exist, but there would always be some other pair of cells with distance $1$ or $2$ too.\n","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.6, PYPY, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, rust, SCALA, swift, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, kotlin, PERL6, TEXT, SCM chicken, PYP3, CLOJ, COB, FS","max_timelimit":"1","source_sizelimit":"50000","problem_author":"bciobanu","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span>bciobanu<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"25-11-2018","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/bciobanu'>bciobanu<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/constructive'>constructive<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium-hard'>medium-hard<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/observations'>observations<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/pruning'>pruning<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/snckel19'>snckel19<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/taran_1407'>taran_1407<\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/RECOVER","time":{"view_start_date":1544295600,"submit_start_date":1544295600,"visible_start_date":1544295600,"end_date":1735669800,"current":1559472981},"user":{"username":"","access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}