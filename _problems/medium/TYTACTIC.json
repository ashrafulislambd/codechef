{"category_name":"medium","status":"success","problem_code":"TYTACTIC","problem_name":"Tywins Tactics","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><p>\nTywin Lannister is a tactical genius. At the heart of his tactical skills, is the way he has organized his armies, and the way he is able to estimate his soldiers' skill-levels, thus helping him make crucial decisions as to whom to dispatch to which areas of the war.\n<\/p>\n<p>\nHis army is organized in the form of a hierarchy - indeed it is a tree, with him as the root. We say \"<b>A has immediate superior B<\/b>\" if <b>A<\/b> reports directly to <b>B<\/b>. We further say \"<b>A has superior B<\/b>\" if there is a chain of soldiers starting with <b>A<\/b>, ending with <b>B<\/b>, and where each soldier reports directly to the next soldier of the chain. Further, each soldier is assigned an initial <b>skill-level<\/b> based on prior experience and battle proficiency.\n<\/p>\n<p>\nIn order for Tywin to decide whom to send to which battle, he has the following scheme: He chooses a particular soldier <b>S<\/b> as the leader of his temporary 'regiment', and sends in to battle, <b>S<\/b> as well as all the soldiers that have <b>S<\/b> as one of their superiors. He estimates the skill level of the regiment as the total skill level of all the soldiers under <b>S<\/b> (denoted by query \"<b>Q S<\/b>\").\n<\/p>\n<p>\nAfter a battle, he may want to update the skill levels of some soldiers. If he wants to update the skill level of soldier <b>S<\/b> to value <b>x<\/b>, it is denoted by the query \"<b>U S x<\/b>\".\n<\/p>\n<p>\nYou are given the structure of the army, whose size is <b>N<\/b>, the initial skill levels of all the individual soldiers, as well the number of queries <b>M<\/b>. For each query of the type \"<b>Q S<\/b>\", report the sum of skill-levels of all the soldiers who have <b>S<\/b> as their superior.\n<\/p>\n<p>\n<b>Note:<\/b> The soldiers are numbered 1 to <b>N<\/b>, and Tywin is given the number <b>1<\/b>.\n<\/p>\n<h3>Input<\/h3>\n<p>\nThe first line consists of the integers <b>N<\/b> and <b>M<\/b>, denoting the number of soldiers and the number of queries.<br \/><br \/>\nThis is followed by a single line consisting of <b>N<\/b> nonnegative values - the <b>skill levels of the N soldiers<\/b>.<br \/><br \/>\nThis is then followed by <b>N-1<\/b> lines consisting of pairs of integers <b>(u, v)<\/b>, denoting that either <b>u is an immediate superior of v, or vice-versa<\/b>.<br \/><br \/>\nFinally you are given the <b>M<\/b> queries, of either the form \"<b>U S x<\/b>\" or \"<b>Q S<\/b>\".<\/p>\n<h3>Output<\/h3>\n<p>\nFor each \"<b>Q S<\/b>\" query, output the sum of skill values of all the soldiers under <b>S<\/b>.\n<\/p>\n<h3>Constraints<\/h3>\n<ul>\n<li> <b>1<\/b> \u2264 <b>N<\/b> \u2264 <b>10<sup>5<\/sup><\/b> <\/li>\n<li> <b>1<\/b> \u2264 <b>M<\/b> \u2264 <b>10<sup>5<\/sup><\/b> <\/li>\n<li> All skill values given with be in the range [<b>0<\/b>, <b>20,000<\/b>] <\/li>\n<li> <b>1<\/b> \u2264 <b>S<\/b> \u2264 <b>N<\/b> for all queries <\/li>\n<li> All soldiers will have soldier <b>1<\/b> (Tywin) as their superior <\/li>\n<\/ul>\n<h3>Example<\/h3>\n<pre>\n<b>Input:<\/b>\n5 8\n7 2 0 5 8\n1 2\n2 3\n2 4\n1 5\nQ 1\nQ 2\nU 2 4\nQ 1\nQ 2\nU 5 3\nQ 1\nQ 2\n\n<b>Output:<\/b>\n22\n7\n24\n9\n19\n9\n<\/pre>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYTH, PYTH 3.4, RUBY, SCALA, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"1","source_sizelimit":"50000","problem_author":"pragrame","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>pragrame<\/span>","problem_tester":"tuananh93","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>tuananh93<\/span>","date_added":"7-06-2013","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/cook35'>\n                    cook35\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/dfs'>\n                    dfs\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/pragrame'>\n                    pragrame\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/simple'>\n                    simple\n                <\/a>","editorial_url":"http:\/\/discuss.codechef.com\/problems\/TYTACTIC","user":{"username":null},"time":{"view_start_date":1372012200,"submit_start_date":1372012200,"visible_start_date":1414769400,"end_date":1735669800,"current":1493557952},"todo":false,"problem_status":"unattempted"}