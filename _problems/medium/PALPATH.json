
{"category_name":"medium","status":"success","problem_code":"PALPATH","problem_name":"Palindromic Walks","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span>You are given an undirected graph $G$ with $N$ vertices and $M$ edges. The vertices are numbered from 1 to $N$. Each edge has associated with it, a character (a lowercase english alphabet) and a weight. You are given two **distinct** vertices $s$ and $t$. \n\nA palindrome is a string which reads the same forwards and backwards. Note that any string with length $1$ is also a palindrome.\n\nA walk is a sequence of edges (with repetitions allowed) such that every adjacent pair of edges in the sequence is incident on a common vertex. A walk is called a palindromic walk if the string formed by the concatenation of characters written on the edges of the walk taken in that order, is a palindrome.\n\nThe cost of a walk is defined as the sum of weights of all the edges in the walk. Note that if an edge appears $p$ times in a walk, its weight has to be added $p$ times to the cost.\n\nYou have to find the minimum cost of a palindromic walk from $s$ to $t$ or print $-1$ if no palindromic walk exists.\n\nNote that the graph **might** have multiple edges but won't have any self loops.\n\n###Input:\n\n- First line will contain $T$, the number of testcases. Then the testcases follow. \n- The first line of each testcase contains $4$ space separated integers integers: $N, M, s, t$ denoting the number of vertices in the graph, number of edges in the graph, and the end vertices of the walk respectively.\n- Each of the next $M$ lines contains the description of an edge. It contains three space separated integers followed by a character: $u, v, w, c$, denoting an undirected edge between vertices $u$ and $v$, having weight $w$ and the character $c$ written on it. \n\n###Output:\nFor each testcase, output in a single line  the minimum cost of a palindromic walk from $s$ to $t$, or $-1$ if no such walk exists.\n\n###Constraints \n- $1 \\leq T \\leq 1000$\n- $2 \\leq N \\leq 1000$\n- $1 \\leq M \\leq 1000$\n- Sum of $N$ over all testcases doesn't exceed $1000$\n- Sum of $M$ over all testcases doesn't exceed $1000$\n- $s \\neq t$\n- $ 1 \\leq s, t \\leq n$\n- Each character $c$ is a lowercase english letter.\n- $0 \\leq w \\leq 10^9 $.\n- $u \\neq v $\n- $ 1 \\leq u, v \\leq n$\n\n###Sample Input:\n```\n3\n6 6 1 6\n1 2 2 a\n1 2 3 b\n2 3 1 b\n3 4 1 a\n4 5 1 a\n5 6 1 a\n3 2 1 3\n1 2 1 a\n2 3 2 b\n3 2 1 2\n1 2 1 a\n2 3 2 b\n```\n\n###Sample Output:\n```\n10\n-1\n1\n```\n\t\n###EXPLANATION:\n\nIn the first testcase, we choose the walk $1 \\rightarrow 2 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6$ with cost $2 + 2 + 2 + 1 + 1 + 1 + 1 = 10$ . The string formed by concatenation of characters is `aaabaaa`, which is a palindrome . \n\n**Note** that  there are two edges between $1$ and $2$,  one having character 'a' written on it and weight $2$ and the other having character 'b' written and weight $3$.\n\nIn the second testcase, there is no palindromic walk from $1$ to $3$, hence $-1$ has to be printed.\n\nIn the third testcase we can choose the walk $1 \\rightarrow 2$ having cost $1$ and giving a palindromic string `a`.\n","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.6, PYPY, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, rust, SCALA, swift, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, kotlin, PERL6, TEXT, SCM chicken, PYP3, CLOJ, COB, FS","max_timelimit":"1","source_sizelimit":"50000","problem_author":"jtnydv25","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>jtnydv25<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"24-12-2018","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/jtnydv25'>jtnydv25<\/a>","time":{"view_start_date":1546074900,"submit_start_date":1546074900,"visible_start_date":1546074900,"end_date":1735669800,"current":1559472978},"user":{"username":"","access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}